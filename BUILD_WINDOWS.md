# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–±–æ—Ä–∫–µ –Ω–∞ Windows

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **Go 1.24 –∏–ª–∏ –Ω–æ–≤–µ–µ**
   - –°–∫–∞—á–∞–π—Ç–µ —Å [https://go.dev/dl/](https://go.dev/dl/)
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –ø–∞–ø–∫—É `C:\Program Files\Go`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É: `go version`

2. **–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä C (GCC) - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û**
   - Fyne —Ç—Ä–µ–±—É–µ—Ç CGO, –∞ CGO —Ç—Ä–µ–±—É–µ—Ç GCC
   - **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:**
     - [TDM-GCC](https://jmeubank.github.io/tdm-gcc/) - —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –≤–∞—Ä–∏–∞–Ω—Ç
     - [MinGW-w64](https://www.mingw-w64.org/) - —á–µ—Ä–µ–∑ MSYS2 –∏–ª–∏ WinLibs
   - –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ–±–∞–≤—å—Ç–µ `bin` –ø–∞–ø–∫—É GCC –≤ PATH
   - **–í–∞–∂–Ω–æ:** –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏!
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `gcc --version`

3. **CGO** (–≤–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - Fyne —Ç—Ä–µ–±—É–µ—Ç CGO –¥–ª—è —Ä–∞–±–æ—Ç—ã
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ CGO_ENABLED=1

4. **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: rsrc** (–¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è –∏–∫–æ–Ω–∫–∏)
   ```bash
   go install github.com/akavel/rsrc@latest
   ```
   –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `rsrc.exe` –±—É–¥–µ—Ç –≤ `%USERPROFILE%\go\bin\`

## üî® –°–±–æ—Ä–∫–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É (CMD) –∏–ª–∏ PowerShell –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏:

```batch
build\build_windows.bat
```

–ò–ª–∏ –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞:

```batch
.\build\build_windows.bat
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –û–±–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`go mod tidy`)
- –í—Å—Ç—Ä–æ–∏—Ç –∏–∫–æ–Ω–∫—É (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω rsrc)
- –°–æ–±–µ—Ä–µ—Ç –ø—Ä–æ–µ–∫—Ç
- –°–æ–∑–¥–∞—Å—Ç `singbox-launcher.exe` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–∞—è —Å–±–æ—Ä–∫–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞

2. –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```batch
go mod tidy
```

3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –í—Å—Ç—Ä–æ–π—Ç–µ –∏–∫–æ–Ω–∫—É:
```batch
rsrc -ico assets/app.ico -manifest app.manifest -o rsrc.syso
```

4. –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
```batch
go build -ldflags="-H windowsgui -s -w" -o singbox-launcher.exe
```

–§–ª–∞–≥–∏ —Å–±–æ—Ä–∫–∏:
- `-H windowsgui` - —Å–∫—Ä—ã–≤–∞–µ—Ç –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –æ–∫–Ω–æ (GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
- `-s` - —É–±–∏—Ä–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É —Å–∏–º–≤–æ–ª–æ–≤
- `-w` - —É–±–∏—Ä–∞–µ—Ç –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

## ‚ö†Ô∏è –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "go: command not found"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Go —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ PATH: `echo %PATH%` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å `C:\Program Files\Go\bin`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Go

### –û—à–∏–±–∫–∞: "build constraints exclude all Go files"
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Fyne –Ω–∞ Windows
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ CGO_ENABLED=1
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ: `set CGO_ENABLED=1` –ø–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π

### –û—à–∏–±–∫–∞: "rsrc: command not found"
- –≠—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –∏–∫–æ–Ω–∫–∞ –ø—Ä–æ—Å—Ç–æ –Ω–µ –±—É–¥–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–∞
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: `go install github.com/akavel/rsrc@latest`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `%USERPROFILE%\go\bin` –≤ PATH

### –û—à–∏–±–∫–∞: "gcc: executable file not found in %PATH%"

**–ü—Ä–æ–±–ª–µ–º–∞:** CGO —Ç—Ä–µ–±—É–µ—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä C (GCC), –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É Go –Ω–∞ Windows.

**–†–µ—à–µ–Ω–∏–µ - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:**

#### –í–∞—Ä–∏–∞–Ω—Ç 1: TDM-GCC (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö)

1. –°–∫–∞—á–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ —Å [https://jmeubank.github.io/tdm-gcc/](https://jmeubank.github.io/tdm-gcc/)
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ:
   - **Architecture**: x86_64 (64-bit)
   - **Installation directory**: `C:\TDM-GCC-64` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - **Add to PATH**: ‚úÖ –û—Ç–º–µ—Ç—å—Ç–µ –≥–∞–ª–æ—á–∫—É
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É:
   ```batch
   gcc --version
   ```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: MinGW-w64 (—á–µ—Ä–µ–∑ MSYS2)

1. –°–∫–∞—á–∞–π—Ç–µ MSYS2 —Å [https://www.msys2.org/](https://www.msys2.org/)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ MSYS2
3. –û—Ç–∫—Ä–æ–π—Ç–µ **MSYS2 MSYS** (–Ω–µ MinGW64!)
4. –û–±–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç—ã:
   ```bash
   pacman -Syu
   ```
5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ MinGW-w64:
   ```bash
   pacman -S mingw-w64-x86_64-gcc
   ```
6. –î–æ–±–∞–≤—å—Ç–µ –≤ PATH: `C:\msys64\mingw64\bin`
7. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É

#### –í–∞—Ä–∏–∞–Ω—Ç 3: MinGW-w64 (–ø—Ä—è–º–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞)

1. –°–∫–∞—á–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ —Å [https://www.mingw-w64.org/downloads/](https://www.mingw-w64.org/downloads/)
2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [WinLibs](https://winlibs.com/) - –≥–æ—Ç–æ–≤—ã–µ —Å–±–æ—Ä–∫–∏
3. –†–∞—Å–ø–∞–∫—É–π—Ç–µ –≤ `C:\mingw64`
4. –î–æ–±–∞–≤—å—Ç–µ `C:\mingw64\bin` –≤ PATH
5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É

**–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É (–≤–∞–∂–Ω–æ!)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `gcc --version`
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–±–æ—Ä–∫—É —Å–Ω–æ–≤–∞: `build\build_windows.bat`

## üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ—è–≤–∏—Ç—Å—è:
- `singbox-launcher.exe` - –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –æ–±—ã—á–Ω–æ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 15-25 –ú–ë (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–µ—Ä—Å–∏–∏ Go –∏ —Ñ–ª–∞–≥–æ–≤ —Å–±–æ—Ä–∫–∏).

## üöÄ –ó–∞–ø—É—Å–∫

–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `singbox-launcher.exe` –¥–≤–æ–π–Ω—ã–º –∫–ª–∏–∫–æ–º –∏–ª–∏ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:

```batch
.\singbox-launcher.exe
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ü–µ—Ä–≤–∞—è —Å–±–æ—Ä–∫–∞ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç (—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
- –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å–±–æ—Ä–∫–∏ –±—É–¥—É—Ç –±—ã—Å—Ç—Ä–µ–µ
- –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å —Ñ–ª–∞–≥ `-H windowsgui` —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –∫–æ–Ω—Å–æ–ª—å–Ω—ã–µ –ª–æ–≥–∏

